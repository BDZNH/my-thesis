%!TEX root = ../Demo.tex
\chapter{算法迭代过程}
\begin{table}[!htbp]
    \caption{图 \ref{fig:DFA11-0} 的 DFA 在 DFA::min\_Hopcroft 算法中的迭代过程}
    \label{tab:hopcroft}
    \centering
    \footnotesize% fontsize
    \setlength{\tabcolsep}{4pt}% column separation
    \renewcommand{\arraystretch}{1.2}%row space 
    \begin{tabular}{ccccccc|cccccccccc|cl} 
        \toprule%\hline 
        \multirow{2}{*}{$n$} & \multirow{2}{*}{状态} & \multirow{2}{*}{$p$} & \multirow{2}{*}{$q$} & \multirow{2}{*}{$L[q]$} & \multirow{2}{*}{$C$} & \multirow{2}{*}{$r$} & \multicolumn{10}{c|}{$L$} & \multirow{2}{*}{$repr$} & \multirow{2}{*}{$\mbox{　　　　}P$}  \\
        \cline{8-17}             &                   &                     &                    &                       &                   &    & 0 & 1 &2 &3 &4 &5 &6 &7 & 8 & 9 & & \\
        %                        &        & \multicolumn{4}{c}{输入字符} \\
        %\cline{3-6}  {状态说明}  & {状态} &$a$ & $b$ & $1$ & $\epsilon$ \\
        \midrule%\hline
        \multirow{2}{*}{1} & 前 & 0 & 4 & 1 & 1 & -  & 0 & 0 & 0 & 0 & 1 & 0 & 0 & 0 & 0 & 0 & \{0,4\} & \{0,1,2,3,5,6,7,9\},\{4,8\} \\
                           & 后 & 0 & 4 & 1 & 1 & 3  & 0 & 0 & 0 & 2 & 1 & 0 & 0 & 0 & 0 & 0 & \{0,4\} & \{0,1,2,5,6,9\},\{3,7\},\{4,8\} \\
        \midrule
        \multirow{2}{*}{2} & 前 & 4 & 4 & 1 & 1 & -  & 0 & 0 & 0 & 2 & 1 & 0 & 0 & 0 & 0 & 0 & \{0,4\} & \{0,1,2,5,6,9\},\{3,7\},\{4,8\} \\
                           & 后 & 4 & 4 & 2 & 1 & 8  & 0 & 0 & 0 & 2 & 2 & 0 & 0 & 0 & 1 & 0 & \{0,4\} & \{0,1,2,5,6,9\},\{3,7\},\{4\},\{8\} \\
        \midrule
        \multirow{2}{*}{3} & 前 & 0 & 3 & 1 & 1 & -  & 0 & 0 & 0 & 1 & 2 & 0 & 0 & 0 & 1 & 0 & \{0,3,4,8\} & \{0,1,2,5,6,9\},\{3,7\},\{4\},\{8\} \\
                           & 后 & 0 & 3 & 1 & 1 & -1 & 0 & 0 & 0 & 1 & 2 & 0 & 0 & 0 & 1 & 0 & \{0,3,4,8\} & \{0,1,2,5,6,9\},\{3,7\},\{4\},\{8\} \\
        \midrule
        
        \multirow{2}{*}{4} & 前 & 3 & 3 & 1 & 1 & -  & 0 & 0 & 0 & 1 & 2 & 0 & 0 & 0 & 1 & 0 & \{0,3,4,8\} & \{0,1,2,5,6,9\},\{3,7\},\{4\},\{8\} \\
                           & 后 & 3 & 3 & 1 & 1 & -1 & 0 & 0 & 0 & 1 & 2 & 0 & 0 & 0 & 1 & 0 & \{0,3,4,8\} & \{0,1,2,5,6,9\},\{3,7\},\{4\},\{8\} \\
        \midrule
        \multirow{2}{*}{5} & 前 & 4 & 3 & 1 & 1 & -  & 0 & 0 & 0 & 1 & 2 & 0 & 0 & 0 & 1 & 0 & \{0,3,4,8\} & \{0,1,2,5,6,9\},\{3,7\},\{4\},\{8\} \\
                           & 后 & 4 & 3 & 1 & 1 & -1 & 0 & 0 & 0 & 1 & 2 & 0 & 0 & 0 & 1 & 0 & \{0,3,4,8\} & \{0,1,2,5,6,9\},\{3,7\},\{4\},\{8\} \\
        \midrule
        \multirow{2}{*}{6} & 前 & 8 & 3 & 1 & 1 & -  & 0 & 0 & 0 & 1 & 2 & 0 & 0 & 0 & 1 & 0 & \{0,3,4,8\} & \{0,1,2,5,6,9\},\{3,7\},\{4\},\{8\} \\
                           & 后 & 8 & 3 & 1 & 1 & -1 & 0 & 0 & 0 & 1 & 2 & 0 & 0 & 0 & 1 & 0 & \{0,3,4,8\} & \{0,1,2,5,6,9\},\{3,7\},\{4\},\{8\} \\
        \midrule
        \multirow{2}{*}{7} & 前 & 0 & 3 & 0 & 0 & -  & 0 & 0 & 0 & 0 & 2 & 0 & 0 & 0 & 1 & 0 & \{0,3,4,8\} & \{0,1,2,5,6,9\},\{3,7\},\{4\},\{8\} \\
                           & 后 & 0 & 3 & 0 & 0 & 2  & 2 & 0 & 0 & 0 & 2 & 0 & 0 & 0 & 1 & 0 & \{0,3,4,8\} & \{0,1,5\},\{2,6,9\}\{3,7\},\{4\},\{8\} \\
        \midrule
        \multirow{2}{*}{8} & 前 & 3 & 3 & 0 & 0 & -  & 2 & 0 & 0 & 0 & 2 & 0 & 0 & 0 & 1 & 0 & \{0,3,4,8\} & \{0,1,5\},\{2,6,9\},\{3,7\},\{4\},\{8\} \\
                           & 后 & 3 & 3 & 0 & 0 & -1 & 2 & 0 & 0 & 0 & 2 & 0 & 0 & 0 & 1 & 0 & \{0,3,4,8\} & \{0,1,5\},\{2,6,9\},\{3,7\},\{4\},\{8\} \\
        \midrule
        \multirow{2}{*}{9} & 前 & 4 & 3 & 0 & 0 & -  & 2 & 0 & 0 & 0 & 2 & 0 & 0 & 0 & 1 & 0 & \{0,3,4,8\} & \{0,1,5\},\{2,6,9\},\{3,7\},\{4\},\{8\} \\
                           & 后 & 4 & 3 & 0 & 0 & -1 & 2 & 0 & 0 & 0 & 2 & 0 & 0 & 0 & 1 & 0 & \{0,3,4,8\} & \{0,1,5\},\{2,6,9\},\{3,7\},\{4\},\{8\} \\
        \midrule
        \multirow{2}{*}{10}& 前 & 8 & 3 & 0 & 0 & -  & 2 & 0 & 0 & 0 & 2 & 0 & 0 & 0 & 1 & 0 & \{0,3,4,8\} & \{0,1,5\},\{2,6,9\},\{3,7\},\{4\},\{8\} \\
                           & 后 & 8 & 3 & 0 & 0 & -1 & 2 & 0 & 0 & 0 & 2 & 0 & 0 & 0 & 1 & 0 & \{0,3,4,8\} & \{0,1,5\},\{2,6,9\},\{3,7\},\{4\},\{8\} \\
        \midrule
        \multirow{2}{*}{11}& 前 & 0 & 0 & 1 & 1 & -  & 1 & 0 & 0 & 0 & 2 & 0 & 0 & 0 & 1 & 0 & \{0,2,3,4,8\} & \{0,1,5\},\{2,6,9\},\{3,7\},\{4\},\{8\} \\
                           & 后 & 0 & 0 & 2 & 1 & 1  & 2 & 0 & 0 & 0 & 2 & 0 & 0 & 0 & 1 & 0 & \{0,2,3,4,8\} & \{0\},\{1,5\},\{2,6,9\},\{3,7\},\{4\},\{8\} \\
        \midrule
        
        \multirow{2}{*}{12}& 前 & 2 & 0 & 2 & - & -  & - & - & - & - & - & - & - & - & - & - & -             & ------ \\
                           & 后 & - & - & - & - & -  & - & - & - & - & - & - & - & - & - & - & -             & ------ \\
        %\midrule
        \bottomrule%\hline 
    \end{tabular}
\end{table}

表 \ref{tab:hopcroft} 中的表头与 FIRE engine 中 Hopcroft 算法的实现（算法代码全文见代码 \ref{lst:hop}）中的变量一一对应。其中
\begin{itemize}
    \item $n$ 为迭代次数（FIRE engine 中无此变量，为了方便描述算法迭代过程添加）；
    \item “状态”意指进行等价类分割前和等价类分割后；
    \item $p$ 为当前要进行等价类分割的等价类；
    \item $q$ 为等价类分割的参数，$q \in Q$；
    \item L[q] 作为函数 C.iterator(L[q]) 的参数；
    \item $C$ 为等价类分割的参数，$C \in V$；
    \item $r$ 为分割开的等价类的代表；
    \item $L$ 为 Hopcroft 算法中的 $L$；
    \item $repr$ 为 等价类代表集合，其值为 $P$ 中每个等价类中最小的状态的集合；
    \item $P$ 为等价类集合；
\end{itemize}

\begin{remark}\label{rem:means-of-L}
    Hopcroft 算法（算法 \ref{al:4-8}）中的 “$L$” 存储的是二元关系 $F \times V$ 或 $(Q \setminus F) \times V$ ， FIRE engine 中的 “$L$” 是一个一维整型数组，其中第 $i$ 个元素的值表示第 $i$ 个状态还需要处理的字符数目。当 FIRE engine 中的 “$L$” 数组内所有元素的值全部为 0 时，算法迭代结束。
\end{remark}